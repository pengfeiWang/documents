(function(){function a(n,c){var l=document.getElementById("inp");var e=ace.edit("inp");var g=document.getElementById("preview");var o=document.getElementById("up-img");var r=document.getElementById("create-demo");var b="ace/mode/"+(c?c:"markdown");e.getSession().setMode(b);if(c){e.setTheme("ace/theme/monokai")}else{e.setTheme("ace/theme/dreamweaver")}e.setAutoScrollEditorIntoView(true);e.renderer.setShowGutter(!0);if(c=="html"){e.setOption("enableEmmet",true)}e.setOption("maxLines",6000);e.setOption("minLines",50);e.getSession().setUseWrapMode(!0);e.setShowPrintMargin(!1);if(n=="edit"){var i=document.getElementById("tmp-source");e.getSession().setValue(i.value)}window.editor=e;e.resize(true);var h=new marked.Renderer();h.heading=function(s,t){var m=s.toLowerCase().replace(/[^\w]+/g,"-");return"<h"+t+' id="'+s.replace(/\s+/g,"-")+'">'+s+"</h"+t+">"};h.link=function(m,w,v){if(this.options.sanitize){try{var t=decodeURIComponent(unescape(m)).replace(/[^\w:]/g,"").toLowerCase()}catch(u){return""}if(t.indexOf("javascript:")===0){return""}}var s='<a href="'+m+'"';if(w){s+=' title="'+w+'"'}s+=' target="_blank">'+v+"</a>";return s};h.code=function(s,v,t){s=s.replace(/\</g,"&lt;").replace(/\>/g,"&gt;");if(!v){return"<pre><code>"+s+"\n</code></pre>"}if(/demo/i.test(v)){var u="查看DEMO请点击";var m=[];if(/\:/.test(v)){m=v.split(":");u=m[1]}return'<a href="javascript:;" data-code="'+escape(s,true)+'">'+u+"\n</a>\n"}else{return'<pre><code class="'+this.options.langPrefix+escape(v,true)+'">'+s+"\n</code></pre>\n"}};var q=false;var k;if(c){var j=document.getElementById("preview");var p=j.getElementsByTagName("iframe")[0];var f=p.offsetHeight;var d=e.container.offsetHeight;if(d>f){p.style.height=d+"px"}p.onload=function(){f=p.offsetHeight;if(d>f){p.style.height=d+"px"}e.on("change",function(s){f=p.offsetHeight;if(d>f){p.style.height=d+"px"}var m=e.getSession().getValue();p.contentDocument.getElementById("appWrap").innerHTML=m})}}else{e.on("change",function(t){var m=marked(e.getSession().getValue(),{renderer:h});g.innerHTML=m;var s=g.getElementsByTagName("pre");window.sideHand();if(s&&hlig){hlig(s)}})}e._signal("change");window.sideHand();if(r&&createDemoHandle){$.on(r,"click",function(m){m.preventDefault();createDemoHandle()})}}window.editJs=a})();
